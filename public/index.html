<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RealZodiac Hero</title>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Waterfall&family=Zain:ital,wght@0,200;0,300;0,400;0,700;0,800;0,900;1,300;1,400&display=swap" rel="stylesheet">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Zain', sans-serif;
      background: #0a0a14;
      color: #fff;
      overflow-x: hidden;
    }

    /* Header */
    header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      padding: 20px 40px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 1000;
      background: rgba(10, 10, 20, 0.8);
      backdrop-filter: blur(10px);
    }

    .logo {
      font-family: 'Zain', sans-serif;
      font-size: 24px;
      color: #d4af37;
      font-weight: 400;
    }

    .hamburger {
      width: 30px;
      height: 24px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      cursor: pointer;
    }

    .hamburger span {
      width: 100%;
      height: 2px;
      background: #d4af37;
      transition: all 0.3s ease;
    }

    /* Navigation Menu */
    .nav-menu {
      position: fixed;
      top: 0;
      right: -100%;
      width: 300px;
      height: 100vh;
      background: rgba(10, 10, 20, 0.95);
      backdrop-filter: blur(20px);
      padding: 80px 40px;
      transition: right 0.3s ease;
      z-index: 999;
    }

    .nav-menu.active {
      right: 0;
    }

    .nav-menu a {
      display: block;
      color: #f4e4b7;
      text-decoration: none;
      font-size: 20px;
      margin-bottom: 30px;
      transition: color 0.3s ease;
    }

    .nav-menu a:hover {
      color: #d4af37;
    }

    #scroll-container {
      height: 400vh;
    }

    #stars-canvas,
    #constellation-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      pointer-events: none;
    }

    #stars-canvas { z-index: 1; }
    #constellation-canvas { z-index: 2; }

    .progress-bar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 2px;
      background: rgba(212, 175, 55, 0.2);
      z-index: 200;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #d4af37, #f4e4b7);
      width: 0%;
      transition: width 0.1s linear;
    }

    .section {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      opacity: 0;
      transition: opacity 0.5s ease;
      z-index: 10;
      max-width: 90%;
      pointer-events: none;
    }

    .section[data-index="0"] {
      font-family: 'Waterfall', cursive;
      font-size: clamp(60px, 15vw, 140px);
      font-weight: 400;
      color: #d4af37;
      line-height: 1.2;
    }

    .section[data-index="1"] {
      font-family: 'Zain', sans-serif;
      font-size: clamp(24px, 5vw, 42px);
      color: #f4e4b7;
      font-weight: 300;
    }

    .cta {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      opacity: 0;
      z-index: 10;
      font-family: 'Zain', sans-serif;
      font-size: clamp(32px, 7vw, 56px);
      color: #d4af37;
      font-weight: 400;
      letter-spacing: 2px;
      pointer-events: none;
    }

    .scroll-arrow {
      position: fixed;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      width: 24px;
      height: 24px;
      opacity: 0.6;
      z-index: 100;
      animation: arrowTwinkle 5s ease-in-out infinite;
    }

    .scroll-arrow svg {
      width: 100%;
      height: 100%;
      animation: bounceSlow 5s ease-in-out infinite;
    }

    @keyframes bounceSlow {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(4px); }
    }

    @keyframes arrowTwinkle {
      0%, 100% { opacity: 0.6; }
      50% { opacity: 0.35; }
    }

    /* Sections after hero */
    #hero {
      position: relative;
      height: 400vh;
    }

    #scroll-container {
      height: 100%;
    }

    .content-section {
      min-height: 100vh;
      padding: 100px 40px;
      position: relative;
    }

    .section-intro {
      max-width: 800px;
      margin: 0 auto;
      line-height: 1.8;
    }

    @keyframes intro-appear {
      0%   { opacity: 0; transform: translateY(14px); }
      55%  { text-shadow: 0 0 32px rgba(212, 152, 48, 0.22); }
      100% { opacity: 1; transform: translateY(0);   text-shadow: none; }
    }

    .section-intro p {
      font-size: 18px;
      color: rgba(253, 228, 183, 0.90);
      margin-bottom: 30px;
    }

    .intro-word {
      display: inline-block;
      animation: intro-appear 1.1s ease-out both;
    }

    .section-title {
      font-family: 'Waterfall', cursive;
      font-size: clamp(48px, 10vw, 80px);
      color: #d4af37;
      margin-bottom: 60px;
      text-align: center;
      font-weight: 300;
    }

    .placeholder {
      min-height: 400px;
      border-radius: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: rgba(244, 228, 183, 0.5);
      font-size: 24px;
      max-width: 1200px;
      margin: 0 auto;
    }

    /* ── Hero parallax background assets ───────────────────────────── */
    #hero-intro {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      pointer-events: none; z-index: 3; overflow: hidden;
      opacity: 0;
    }

    /* Pisces cathedral — left side, tall portrait */
    #hi-pw2 { position: absolute; left: 2%; top: 50%; }
    #hi-pw2 img {
      display: block; height: 72vh; width: auto;
      border-radius: 10px; opacity: 0.72;
      transform: translateY(-50%);
      animation: hi-bob 24s ease-in-out infinite 3s;
    }

    /* Scorpio sign — right side, glowing gold */
    #hi-pw3 { position: absolute; right: 6%; top: 48%; }
    #hi-pw3 img {
      display: block; width: 148px;
      transform: translateY(-50%);
      animation: hi-bob 20s ease-in-out infinite, hi-sign-pulse 11s ease-in-out infinite;
    }

    /* Taurus constellation — lower right, smaller */
    #hi-pw4 { position: absolute; right: 14%; top: 68%; }
    #hi-pw4 img {
      width: 26vw; max-width: 300px;
      mix-blend-mode: screen; opacity: 0.70;
      animation: hi-bob 27s ease-in-out infinite 5s;
    }

    /* Float via margin-top so it doesn't fight the centering transform */
    @keyframes hi-bob {
      0%,100% { margin-top: 0;    }
      50%     { margin-top: -18px;}
    }

    @keyframes hi-sign-pulse {
      0%,100% { filter: invert(1) sepia(1) saturate(4.0) hue-rotate(5deg)  brightness(1.8); opacity: 0.62; }
      50%     { filter: invert(1) sepia(1) saturate(6.5) hue-rotate(13deg) brightness(2.6); opacity: 0.88; }
    }

    /* ── Intro text — cathedral glass palette ───────────────────── */
    .hl-bright   { color: #d49830; text-shadow: 0 0 16px rgba(212,152,48,0.32); }
    .hl-copper   { color: #c08840; text-shadow: 0 0 10px rgba(192,136,64,0.14); }
    .hl-clay     { color: #b07858; text-shadow: 0 0 10px rgba(176,120,88,0.13); }
    .hl-gold     { color: #c09038; text-shadow: 0 0 10px rgba(192,144,56,0.14); }
    .hl-amber    { color: #b87840; text-shadow: 0 0 10px rgba(184,120,64,0.13); }
    .hl-ruby     { color: #c07060; text-shadow: 0 0 10px rgba(192,112,96,0.13); }
    .hl-lavender { color: #b07888; text-shadow: 0 0 10px rgba(176,120,136,0.13); }
    .hl-sky      { color: #9878a0; text-shadow: 0 0 10px rgba(152,120,160,0.13); }
    .hl-teal     { color: #4d9d90; text-shadow: 0 0 10px rgba(138,144,104,0.12); }
    .hl-sage     { color: #a08848; text-shadow: 0 0 10px rgba(160,136,72,0.12); }

    @media (max-width: 768px) {
      header {
        padding: 15px 20px;
      }

      .content-section {
        padding: 80px 20px;
      }

      .section-intro p {
        font-size: 16px;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="logo">RealZodiac.app</div>
    <div class="hamburger" id="hamburger">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </header>

  <!-- Navigation Menu -->
  <nav class="nav-menu" id="navMenu">
    <a href="#hero">Home</a>
    <a href="#intro">The Truth</a>
    <a href="#starmap">Your Real Sign</a>
    <a href="#comparison">Compare</a>
    <a href="#premium">Premium</a>
  </nav>

  <!-- Hero Section -->
  <section id="hero">
    <div id="scroll-container"></div>

    <div class="progress-bar">
      <div class="progress-fill" id="progress-fill"></div>
    </div>

    <canvas id="stars-canvas"></canvas>
    <canvas id="constellation-canvas"></canvas>

    <div id="hero-intro">
      <div id="hi-pw2"><img src="/assets/cathedral/pisces.webp" alt=""></div>
      <div id="hi-pw3"><img src="/assets/signs/scorpio.svg" alt=""></div>
      <div id="hi-pw4"><img src="/assets/constellations/aquarius.webp" alt=""></div>
    </div>

    <div class="section" data-index="0">
      Discover Your Real Zodiac
    </div>

    <div class="section" data-index="1">
      The stars have shifted since ancient times
    </div>

    <div class="cta" id="cta">
      Begin Your Journey
    </div>

    <div class="scroll-arrow">
      <svg viewBox="0 0 24 24" fill="none">
        <path d="M12 5V19M12 19L5 12M12 19L19 12" stroke="rgba(212, 175, 55, 0.7)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </div>
  </section>

  <!-- Intro Section -->
  <section id="intro" class="content-section">
    <div class="section-intro">
      <p>For thousands of years, humans have looked to the <span class="hl-gold">stars</span> for guidance. The <span class="hl-lavender">Zodiac</span>—a belt of <span class="hl-teal">constellations</span> along the <span class="hl-bright">Sun's path</span>—has been used to mark time, predict seasons, and create stories about our place in the <span class="hl-sky">cosmos.</span></p>

      <p>But there's something most people don't know: the <span class="hl-lavender">Zodiac</span> you learned about <span class="hl-ruby">isn't accurate anymore.</span> Due to Earth's <span class="hl-bright">axial precession</span>—a slow wobble taking <span class="hl-amber">26,000 years</span>—the <span class="hl-teal">constellations</span> have <span class="hl-copper">shifted</span> by approximately <span class="hl-amber">30 days</span> since the <span class="hl-lavender">Zodiac</span> was first defined in <span class="hl-gold">ancient Babylon.</span></p>

      <p>When <span class="hl-lavender">astrology</span> says you're a <span class="hl-gold">Leo,</span> it's using <span class="hl-sky">sky positions</span> from over <span class="hl-amber">2,000 years ago.</span> But where was the <span class="hl-bright">Sun</span> really located on your <span class="hl-ruby">birth date?</span> That's what we're here to show you—using real <span class="hl-teal">astronomical data</span> and the actual <span class="hl-bright">constellation boundaries</span> defined by modern <span class="hl-teal">astronomy.</span></p>
    </div>
  </section>

  <!-- Star Map Section -->
  <section id="starmap" class="content-section">
    <h2 class="section-title">Discover Your Real Sign</h2>
    <div class="placeholder">
      Date Picker & Interactive Star Map
    </div>
  </section>

  <!-- Comparison Section -->
  <section id="comparison" class="content-section">
    <h2 class="section-title">The Sky Then & Now</h2>
    <div class="placeholder">
      Comparison Cards: What Astrology Says vs Where Sun Actually Was
    </div>
  </section>

  <!-- Premium Section -->
  <section id="premium" class="content-section">
    <h2 class="section-title">Unlock Your Full Birth Chart</h2>
    <div class="placeholder">
      Premium Features & Pricing
    </div>
  </section>

  <script>
    const starsCanvas = document.getElementById('stars-canvas');
    const starsCtx = starsCanvas.getContext('2d');
    const constCanvas = document.getElementById('constellation-canvas');
    const constCtx = constCanvas.getContext('2d');

    function resizeCanvases() {
      starsCanvas.width = constCanvas.width = window.innerWidth;
      starsCanvas.height = constCanvas.height = window.innerHeight;
    }
    resizeCanvases();
    window.addEventListener('resize', resizeCanvases);

    // Star drawing function
    function draw4PointStar(ctx, x, y, size, opacity) {
      ctx.save();
      ctx.translate(x, y);
      ctx.shadowBlur = 8;
      ctx.shadowColor = `rgba(244, 228, 183, ${opacity * 0.6})`;
      ctx.fillStyle = `rgba(244, 228, 183, ${opacity})`;
      ctx.beginPath();
      for (let i = 0; i < 4; i++) {
        const angle = (i * Math.PI / 2);
        const outerX = Math.cos(angle) * size;
        const outerY = Math.sin(angle) * size;
        const innerAngle = angle + Math.PI / 4;
        const innerX = Math.cos(innerAngle) * size * 0.3;
        const innerY = Math.sin(innerAngle) * size * 0.3;
        if (i === 0) ctx.moveTo(outerX, outerY);
        else ctx.lineTo(outerX, outerY);
        ctx.lineTo(innerX, innerY);
      }
      ctx.closePath();
      ctx.fill();
      ctx.restore();
    }

    // Background stars
    class BackgroundStar {
      constructor() {
        this.x = Math.random() * starsCanvas.width;
        this.y = Math.random() * starsCanvas.height;
        this.size = Math.random() * 1.5 + 0.5;
        this.baseOpacity = Math.random() * 0.4 + 0.2;
        this.twinkleSpeed = Math.random() * 0.001 + 0.0005;
        this.twinklePhase = Math.random() * Math.PI * 2;
      }

      draw() {
        const twinkle = Math.sin(Date.now() * this.twinkleSpeed + this.twinklePhase) * 0.4 + 0.6;
        const opacity = this.baseOpacity * twinkle;
        draw4PointStar(starsCtx, this.x, this.y, this.size, opacity);
      }
    }

    const stars = Array.from({ length: 60 }, () => new BackgroundStar());

    function drawStars() {
      starsCtx.clearRect(0, 0, starsCanvas.width, starsCanvas.height);
      stars.forEach(s => s.draw());
    }

    // LEO constellation (12-15 stars, more random/organic)
    const leoConstellation = {
      stars: [
        { x: 0.48, y: 0.28, connections: [1, 3], size: 11 },
        { x: 0.42, y: 0.35, connections: [2], size: 9 },
        { x: 0.35, y: 0.42, connections: [4], size: 10 },
        { x: 0.55, y: 0.32, connections: [5], size: 9 },
        { x: 0.30, y: 0.48, connections: [6], size: 8 },
        { x: 0.62, y: 0.40, connections: [7, 8], size: 10 },
        { x: 0.28, y: 0.56, connections: [], size: 7 },
        { x: 0.68, y: 0.48, connections: [9], size: 9 },
        { x: 0.58, y: 0.50, connections: [10], size: 8 },
        { x: 0.72, y: 0.58, connections: [11], size: 8 },
        { x: 0.52, y: 0.58, connections: [12], size: 9 },
        { x: 0.75, y: 0.66, connections: [], size: 7 },
        { x: 0.46, y: 0.66, connections: [13], size: 8 },
        { x: 0.40, y: 0.72, connections: [], size: 7 },
        { x: 0.65, y: 0.70, connections: [], size: 8 }
      ]
    };

    // CANCER constellation (rotated 160 degrees, bigger and wider, moved down)
    const cancerConstellation = {
      stars: [
        { x: 0.50, y: 0.75, connections: [1, 2, 3], size: 13 },
        { x: 0.38, y: 0.65, connections: [4], size: 11 },
        { x: 0.62, y: 0.65, connections: [5], size: 11 },
        { x: 0.50, y: 0.57, connections: [6], size: 12 },
        { x: 0.32, y: 0.53, connections: [7], size: 10 },
        { x: 0.68, y: 0.53, connections: [8], size: 10 },
        { x: 0.40, y: 0.45, connections: [9], size: 11 },
        { x: 0.28, y: 0.41, connections: [], size: 9 },
        { x: 0.72, y: 0.41, connections: [10], size: 9 },
        { x: 0.50, y: 0.35, connections: [11], size: 10 },
        { x: 0.78, y: 0.33, connections: [], size: 9 },
        { x: 0.60, y: 0.29, connections: [], size: 10 },
        { x: 0.34, y: 0.37, connections: [], size: 9 }
      ]
    };

    function drawConstellation(constellation, progress, driftAmount, animated = true, scale = 1) {
      const w = constCanvas.width;
      const h = constCanvas.height;
      
      const centerX = w / 2;
      const centerY = h / 2;

      // Calculate total lines
      let totalLines = 0;
      constellation.stars.forEach(star => {
        totalLines += star.connections.length;
      });

      constCtx.strokeStyle = `rgba(212, 175, 55, 0.6)`;
      constCtx.lineWidth = 1.5;
      constCtx.shadowBlur = 12;
      constCtx.shadowColor = `rgba(212, 175, 55, 0.7)`;

      if (animated) {
        // Animated drawing - lines draw progressively
        const totalProgress = progress * totalLines;
        let currentLineIndex = 0;

        constellation.stars.forEach(star => {
          star.connections.forEach(targetIdx => {
            const target = constellation.stars[targetIdx];
            
            if (currentLineIndex < totalProgress) {
              const lineProgress = Math.min(totalProgress - currentLineIndex, 1);
              
              // Apply scale from center
              const startX = centerX + (star.x * w - centerX) * scale + driftAmount;
              const startY = centerY + (star.y * h - centerY) * scale;
              const endX = centerX + (target.x * w - centerX) * scale + driftAmount;
              const endY = centerY + (target.y * h - centerY) * scale;
              
              const currentEndX = startX + (endX - startX) * lineProgress;
              const currentEndY = startY + (endY - startY) * lineProgress;
              
              constCtx.beginPath();
              constCtx.moveTo(startX, startY);
              constCtx.lineTo(currentEndX, currentEndY);
              constCtx.stroke();
            }
            currentLineIndex++;
          });
        });

        // Draw stars (appear as their lines reach them)
        constellation.stars.forEach((star, i) => {
          const starLineIndex = constellation.stars.slice(0, i).reduce((sum, s) => sum + s.connections.length, 0);
          if (starLineIndex <= totalProgress) {
            const pulse = Math.sin(Date.now() * 0.002 + i) * 0.3 + 0.7;
            const starX = centerX + (star.x * w - centerX) * scale + driftAmount;
            const starY = centerY + (star.y * h - centerY) * scale;
            draw4PointStar(constCtx, starX, starY, star.size * pulse * scale, 1);
          }
        });
      } else {
        // Instant - show all lines fully drawn
        constellation.stars.forEach(star => {
          star.connections.forEach(targetIdx => {
            const target = constellation.stars[targetIdx];
            const startX = centerX + (star.x * w - centerX) * scale + driftAmount;
            const startY = centerY + (star.y * h - centerY) * scale;
            const endX = centerX + (target.x * w - centerX) * scale + driftAmount;
            const endY = centerY + (target.y * h - centerY) * scale;
            
            constCtx.beginPath();
            constCtx.moveTo(startX, startY);
            constCtx.lineTo(endX, endY);
            constCtx.stroke();
          });
        });

        // Draw all stars
        constellation.stars.forEach((star, i) => {
          const pulse = Math.sin(Date.now() * 0.002 + i) * 0.3 + 0.7;
          const starX = centerX + (star.x * w - centerX) * scale + driftAmount;
          const starY = centerY + (star.y * h - centerY) * scale;
          draw4PointStar(constCtx, starX, starY, star.size * pulse * scale, 1);
        });
      }
    }

    function drawConstellations(scrollProgress) {
      constCtx.clearRect(0, 0, constCanvas.width, constCanvas.height);

      const w = constCanvas.width;

      // New timeline (more spread, gaps between texts for assets):
      // 0.00-0.22: Title
      // 0.22-0.30: Gap A (assets)
      // 0.30-0.48: Subtitle
      // 0.48-0.56: Gap B (assets)
      // 0.56-0.77: Leo draws, holds, drifts
      // 0.74-0.80: Gap C (assets)
      // 0.80-0.94: Cancer appears, holds, zooms
      // 0.92-0.96: Gap D (assets)
      // 0.96-1.00: CTA

      // LEO phase
      if (scrollProgress >= 0.56 && scrollProgress < 0.77) {
        if (scrollProgress < 0.68) {
          const leoProgress = (scrollProgress - 0.56) / 0.12;
          constCtx.globalAlpha = 1;
          drawConstellation(leoConstellation, leoProgress, 0, true, 1);
        } else if (scrollProgress < 0.72) {
          constCtx.globalAlpha = 1;
          drawConstellation(leoConstellation, 1, 0, false, 1);
        } else {
          const driftProgress = (scrollProgress - 0.72) / 0.05;
          const driftAmount = -w * 0.4 * driftProgress;
          constCtx.globalAlpha = 1 - driftProgress;
          drawConstellation(leoConstellation, 1, driftAmount, false, 1);
        }
      }

      // CANCER phase
      if (scrollProgress >= 0.80 && scrollProgress < 0.94) {
        if (scrollProgress < 0.86) {
          const moveProgress = (scrollProgress - 0.80) / 0.06;
          const driftAmount = w * 0.4 * (1 - moveProgress);
          constCtx.globalAlpha = moveProgress;
          drawConstellation(cancerConstellation, 1, driftAmount, false, 1);
        } else if (scrollProgress < 0.90) {
          constCtx.globalAlpha = 1;
          drawConstellation(cancerConstellation, 1, 0, false, 1);
        } else {
          const zoomProgress = (scrollProgress - 0.90) / 0.04;
          const scale = 1 + zoomProgress * 0.5;
          constCtx.globalAlpha = 1 - zoomProgress;
          drawConstellation(cancerConstellation, 1, 0, false, scale);
        }
      }

      constCtx.globalAlpha = 1;
    }

    // Scroll handling
    const sections = document.querySelectorAll('.section');
    const cta = document.getElementById('cta');

    function handleScroll() {
      const scrollTop = window.scrollY;
      const scrollHeight = document.getElementById('scroll-container').offsetHeight;
      const windowHeight = window.innerHeight;
      const maxScroll = scrollHeight - windowHeight;
      const scrollProgress = Math.min(scrollTop / maxScroll, 1);

      document.getElementById('progress-fill').style.width = `${scrollProgress * 100}%`;

      // Title: fade in 0.03-0.10, hold 0.10-0.17, fade out 0.17-0.22
      if (scrollProgress < 0.03) {
        sections[0].style.opacity = 0;
      } else if (scrollProgress < 0.10) {
        sections[0].style.opacity = (scrollProgress - 0.03) / 0.07;
      } else if (scrollProgress < 0.17) {
        sections[0].style.opacity = 1;
      } else {
        sections[0].style.opacity = Math.max(0, 1 - (scrollProgress - 0.17) / 0.05);
      }

      // Subtitle: fade in 0.30-0.37, hold 0.37-0.43, fade out 0.43-0.48
      if (scrollProgress < 0.30) {
        sections[1].style.opacity = 0;
      } else if (scrollProgress < 0.37) {
        sections[1].style.opacity = (scrollProgress - 0.30) / 0.07;
      } else if (scrollProgress < 0.43) {
        sections[1].style.opacity = 1;
      } else {
        sections[1].style.opacity = Math.max(0, 1 - (scrollProgress - 0.43) / 0.05);
      }

      // CTA: fade in 0.96-0.99, fade out 0.99-1.00
      if (scrollProgress < 0.96) {
        cta.style.opacity = 0;
      } else if (scrollProgress < 0.99) {
        cta.style.opacity = (scrollProgress - 0.96) / 0.03;
      } else {
        cta.style.opacity = Math.max(0, 1 - (scrollProgress - 0.99) / 0.01);
      }

      drawConstellations(scrollProgress);
    }

    // Simple parallax background — all assets visible throughout hero, different scroll speeds
    var hiStartTime = Date.now();
    var hiEl = null;

    function updateIntroAssets() {
      if (!hiEl) {
        hiEl = {
          wrap: document.getElementById('hero-intro'),
          pw:   [
            document.getElementById('hi-pw2'),
            document.getElementById('hi-pw3'),
            document.getElementById('hi-pw4')
          ]
        };
        if (!hiEl.wrap) { hiEl = null; return; }
      }

      var st  = window.scrollY;
      var max = document.getElementById('scroll-container').offsetHeight - window.innerHeight;
      var p   = Math.min(st / max, 1);

      // Fade in over 1.5s on load, fade out in final 12% of hero
      var tf   = Math.min((Date.now() - hiStartTime) / 1500, 1);
      var fade = p > 0.88 ? Math.max(0, 1 - (p - 0.88) / 0.10) : 1;
      hiEl.wrap.style.opacity = (tf * fade).toFixed(3);

      // Each layer scrolls up at a different rate — deeper = slower
      // Rates: fraction of scrollTop converted to px offset (gentle, stays in view)
      // pw2 Pisces (faster), pw3 Scorpio, pw4 Aquarius
      var rates = [0.10, 0.11, 0.08];
      hiEl.pw[0].style.transform = 'translateY(calc(-50% + ' + (-st * rates[0]).toFixed(0) + 'px))';
      hiEl.pw[1].style.transform = 'translateY(calc(-50% + ' + (-st * rates[1]).toFixed(0) + 'px))';
      hiEl.pw[2].style.transform = 'translateY('              + (-st * rates[2]).toFixed(0) + 'px)';
    }

    function animate() {
      drawStars();
      updateIntroAssets();
      requestAnimationFrame(animate);
    }

    window.addEventListener('scroll', handleScroll, { passive: true });
    handleScroll();
    animate();

    // Hamburger menu toggle
    const hamburger = document.getElementById('hamburger');
    const navMenu = document.getElementById('navMenu');
    
    hamburger.addEventListener('click', () => {
      navMenu.classList.toggle('active');
    });

    // Close menu when clicking a link
    document.querySelectorAll('.nav-menu a').forEach(link => {
      link.addEventListener('click', () => {
        navMenu.classList.remove('active');
      });
    });

    // Smooth scroll
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({ behavior: 'smooth' });
        }
      });
    });

    // Word-by-word intro animation
    (function () {
      var paras = document.querySelectorAll('.section-intro p');
      var i = 0;
      var gap = 0.055;
      paras.forEach(function (p) {
        Array.from(p.childNodes).forEach(function (node) {
          if (node.nodeType === 3) {
            var parts = node.textContent.split(/(\s+)/);
            var frag = document.createDocumentFragment();
            parts.forEach(function (part) {
              if (/^\s+$/.test(part)) {
                frag.appendChild(document.createTextNode(part));
              } else if (part) {
                var s = document.createElement('span');
                s.className = 'intro-word';
                s.style.animationDelay = (i++ * gap) + 's';
                s.textContent = part;
                frag.appendChild(s);
              }
            });
            node.parentNode.replaceChild(frag, node);
          } else if (node.nodeType === 1) {
            node.classList.add('intro-word');
            node.style.animationDelay = (i * gap) + 's';
            i += node.textContent.trim().split(/\s+/).length;
          }
        });
      });
    })();
  </script>

<script src="lib/astronomy-engine.js"></script>
<script type="module" src="src/app.js"></script>
</body>
</body>
</html>